parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"UTvv":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,r=arguments[3];parcelRequire=function(r,t,n,o){var a,i="function"==typeof parcelRequire&&parcelRequire,c="function"==typeof require&&require;function u(e,n){if(!t[e]){if(!r[e]){var o="function"==typeof parcelRequire&&parcelRequire;if(!n&&o)return o(e,!0);if(i)return i(e,!0);if(c&&"string"==typeof e)return c(e);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}l.resolve=function(t){return r[e][1][t]||t},l.cache={};var s=t[e]=new u.Module(e);r[e][0].call(s.exports,l,s,s.exports,this)}return t[e].exports;function l(e){return u(l.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=r,u.cache=t,u.parent=i,u.register=function(e,t){r[e]=[function(e,r){r.exports=t},{}]};for(var s=0;s<n.length;s++)try{u(n[s])}catch(f){a||(a=f)}if(n.length){var l=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof e&&e.amd&&e(function(){return l})}if(parcelRequire=u,a)throw a;return u}({"efemetrics.js":[function(e,r,t){arguments[3];function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}parcelRequire=function(o,a,i,c){var u,s="function"==typeof parcelRequire&&parcelRequire,l="function"==typeof e&&e;function f(e,r){if(!a[e]){if(!o[e]){var t="function"==typeof parcelRequire&&parcelRequire;if(!r&&t)return t(e,!0);if(s)return s(e,!0);if(l&&"string"==typeof e)return l(e);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}c.resolve=function(r){return o[e][1][r]||r},c.cache={};var i=a[e]=new f.Module(e);o[e][0].call(i.exports,c,i,i.exports,this)}return a[e].exports;function c(e){return f(c.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=o,f.cache=a,f.parent=s,f.register=function(e,r){o[e]=[function(e,t){t.exports=r},{}]};for(var p=0;p<i.length;p++)try{f(i[p])}catch(h){u||(u=h)}if(i.length){var d=f(i[i.length-1]);"object"===(void 0===t?"undefined":n(t))&&void 0!==r&&(r.exports=d)}if(parcelRequire=f,u)throw u;return f}({"Events.js":[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.catchingEventsLogs=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",t={};for(var n in e){var o="";"string"==typeof e[n]?(o='"'+e[n]+'"').replaceAll(" ","_"):"number"!=typeof e[n]&&"boolean"!=typeof e[n]||(o=e[n]),""!==o&&(t[n]=o)}return[r,'"'+e.type+'"',t]}},{}],"Errors.js":[function(e,r,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.catchingErrors=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";e.preventDefault(),e.stopImmediatePropagation(),console.log(e.message);var t={};for(var o in e)if("object"===n(e[o]))t[o]='"'+e[o].constructor.name+'"';else if("string"==typeof e[o]){var a='"'+e[o]+'"';a.includes("[native")||(t[o]=a.replaceAll(" ","_"))}else"number"!=typeof e[o]&&"boolean"!=typeof e[o]||(t[o]=e[o]);return[r,'"'+e.message+'"',t]},t.throwBasicError=function(e){throw new Error(e)}},{}],"Performance.js":[function(e,r,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"performance",t={},o=e.duration;for(var a in e)if("object"===n(e[a]))t[a]='"'+e[a].constructor.name+'"';else if("string"==typeof e[a]){var i='"'+e[a]+'"';t[a]=i.replaceAll(" ","_")}else"number"!=typeof e[a]&&"boolean"!=typeof e[a]||(t[a]=e[a]);return[r,o,t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getPerformance=function(){for(var e=performance.getEntries(),r=[],t=0;t<e.length;t++){var n=e[t].toJSON();r.push(o(n))}return r},t.checkHowLong=function(e,r,t){performance.mark(r),e(),performance.mark(t),performance.measure("measure "+r+" to "+t,r,t);var n=o(performance.getEntriesByName("measure "+r+" to "+t)[0].toJSON());return performance.clearMarks(),performance.clearMeasures(),n},t.preparePerformanceMeasurement=o},{}],"DatabaseController.js":[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setUrl=function(e){t.Url=l=e},t.setBucket=function(e){t.Bucket=f=e},t.setToken=function(e){t.Token=p=e},t.setPrefix=function(e){t.Measurement_prefix=d=e},t.setQuery=function(e){t.query=h=e},t.setExist=function(e){t.DatabaseExist=m=e},t.prepareQuery=y,t.dropDatabase=function(){t.DatabaseExist=m=!1,fetch(l+"/query?db="+f+"&q=DROP DATABASE "+f,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}})},t.sendQueries=function(){""!==h&&""!==l&&""!==f&&m&&(""!==p?fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Token "+p},body:h}):fetch(l+"/api/v2/write?bucket=metrics",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:h}),t.query=h="")},t.createDb=v,t.checkDb=function(e){if(l.includes("localhost:8086")){$.ajax({url:l+"/query?q=show%20databases",dataType:"json",success:function(r){for(var n=!1,o=r.results[0].series[0].values,a=0;a<o.length;a++)o[a][0]===e&&(n=!0);n?t.DatabaseExist=m=!0:v(e)},fail:function(r){v(e)}})}else t.DatabaseExist=m=!0},t.catchPerformanceMeasurements=function(){var e,r=i((0,a.getPerformance)());try{for(r.s();!(e=r.n()).done;){var t=e.value;y(t[0],t[1],t[2])}}catch(n){r.e(n)}finally{r.f()}},t.catchErrors=function(){window.addEventListener("error",function(e){var r=(0,o.catchingErrors)(e);y(r[0],r[1],r[2])})},t.catchEvents=function(e,r){var t,o=i(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;e.addEventListener(a,function(e){var r=(0,n.catchingEventsLogs)(e);y(r[0],r[1],r[2])})}}catch(c){o.e(c)}finally{o.f()}},t.catchOwnFunctionPerformance=function(e,r,t){var n=(0,a.checkHowLong)(e,r,t);y(n[0],n[1],n[2])},t.throwBasicError=function e(r){e(r)},t.setCookie=function(e,r){document.cookie=e+"="+r},t.getCookie=b,t.checkCookie=function(){var e=b("database_address"),r=b("bucket");return!(""===e||""===r)},t.DatabaseExist=t.query=t.Measurement_prefix=t.Token=t.Bucket=t.Url=void 0;var n=e("./Events"),o=e("./Errors"),a=e("./Performance");function i(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=u(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(c)throw a}}}}function c(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return t}(e,r)||u(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){if(e){if("string"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,r):void 0}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var l="";t.Url=l;var f="";t.Bucket=f;var p="";t.Token=p;var d="fem";t.Measurement_prefix=d;var h="";t.query=h;var m=!1;function y(e,r){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=d+"_"+e,a=0,i=Object.entries(n);a<i.length;a++){var u=c(i[a],2);o=o+","+u[0]+"="+u[1]}o=(o=o+" value="+r)+" "+1e6*Date.now()+"\n",t.query=h+=o}function v(e){fetch(l+"/query?q="+("CREATE DATABASE "+e+";"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){t.DatabaseExist=m=!0})}function b(e){for(var r=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var o=t[n];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(r))return o.substring(r.length,o.length)}return""}t.DatabaseExist=m},{"./Events":"Events.js","./Errors":"Errors.js","./Performance":"Performance.js"}],"../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js":[function(e,r,t){var n,o,a=arguments[3],i="__parcel__error__overlay__",c=r.bundle.Module;r.bundle.Module=function(e){c.call(this,e),this.hot={data:r.bundle.hotData,_acceptCallbacks:[],_disposeCallbacks:[],accept:function(e){this._acceptCallbacks.push(e||function(){})},dispose:function(e){this._disposeCallbacks.push(e)}},r.bundle.hotData=null};var u=r.bundle.parent;if(!(u&&u.isParcelRequire||"undefined"==typeof WebSocket)){var s=location.hostname,l="https:"===location.protocol?"wss":"ws",f=new WebSocket(l+"://"+s+":43585/");f.onmessage=function(e){n={},o=[];var r=JSON.parse(e.data);if("update"===r.type){var t=!1;r.assets.forEach(function(e){e.isNew||function e(r,t){var i=r.modules;if(!i)return;if(!i[t]&&r.parent)return e(r.parent,t);if(n[t])return;n[t]=!0;var c=r.cache[t];o.push([r,t]);if(c&&c.hot&&c.hot._acceptCallbacks.length)return!0;return function e(r,t){var n=r.modules;if(!n)return[];var o=[];var a,i,c;for(a in n)for(i in n[a][1])((c=n[a][1][i])===t||Array.isArray(c)&&c[c.length-1]===t)&&o.push(a);r.parent&&(o=o.concat(e(r.parent,t)));return o}(a.parcelRequire,t).some(function(r){return e(a.parcelRequire,r)})}(a.parcelRequire,e.id)&&(t=!0)}),(t=t||r.assets.every(function(e){return"css"===e.type&&e.generated.js}))?(console.clear(),r.assets.forEach(function(e){!function e(r,t){var n=r.modules;if(!n)return;if(n[t.id]||!r.parent){var o=new Function("require","module","exports",t.generated.js);t.isNew=!n[t.id],n[t.id]=[o,t.deps]}else r.parent&&e(r.parent,t)}(a.parcelRequire,e)}),o.forEach(function(e){!function(e,r){var t=e.cache[r];e.hotData={},t&&(t.hot.data=e.hotData);t&&t.hot&&t.hot._disposeCallbacks.length&&t.hot._disposeCallbacks.forEach(function(r){r(e.hotData)});if(delete e.cache[r],e(r),(t=e.cache[r])&&t.hot&&t.hot._acceptCallbacks.length)t.hot._acceptCallbacks.forEach(function(e){e()})}(e[0],e[1])})):location.reload&&location.reload()}if("reload"===r.type&&(f.close(),f.onclose=function(){location.reload()}),"error-resolved"===r.type&&(console.log("[parcel] ✨ Error resolved"),p()),"error"===r.type){console.error("[parcel] 🚨  "+r.error.message+"\n"+r.error.stack),p();var c=function(e){var r=document.createElement("div");r.id=i;var t=document.createElement("div"),n=document.createElement("pre");return t.innerText=e.error.message,n.innerText=e.error.stack,r.innerHTML='<div style="background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;"><span style="background: red; padding: 2px 4px; border-radius: 2px;">ERROR</span><span style="top: 2px; margin-left: 5px; position: relative;">🚨</span><div style="font-size: 18px; font-weight: bold; margin-top: 20px;">'+t.innerHTML+"</div><pre>"+n.innerHTML+"</pre></div>",r}(r);document.body.appendChild(c)}}}function p(){var e=document.getElementById(i);e&&e.remove()}},{}]},{},["../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js","DatabaseController.js"])},{}],"../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js":[function(e,r,t){var n,o,a=arguments[3],i="__parcel__error__overlay__",c=r.bundle.Module;r.bundle.Module=function(e){c.call(this,e),this.hot={data:r.bundle.hotData,_acceptCallbacks:[],_disposeCallbacks:[],accept:function(e){this._acceptCallbacks.push(e||function(){})},dispose:function(e){this._disposeCallbacks.push(e)}},r.bundle.hotData=null};var u=r.bundle.parent;if(!(u&&u.isParcelRequire||"undefined"==typeof WebSocket)){var s=location.hostname,l="https:"===location.protocol?"wss":"ws",f=new WebSocket(l+"://"+s+":43117/");f.onmessage=function(e){n={},o=[];var r=JSON.parse(e.data);if("update"===r.type){var t=!1;r.assets.forEach(function(e){e.isNew||function e(r,t){var i=r.modules;if(!i)return;if(!i[t]&&r.parent)return e(r.parent,t);if(n[t])return;n[t]=!0;var c=r.cache[t];o.push([r,t]);if(c&&c.hot&&c.hot._acceptCallbacks.length)return!0;return function e(r,t){var n=r.modules;if(!n)return[];var o=[];var a,i,c;for(a in n)for(i in n[a][1])((c=n[a][1][i])===t||Array.isArray(c)&&c[c.length-1]===t)&&o.push(a);r.parent&&(o=o.concat(e(r.parent,t)));return o}(a.parcelRequire,t).some(function(r){return e(a.parcelRequire,r)})}(a.parcelRequire,e.id)&&(t=!0)}),(t=t||r.assets.every(function(e){return"css"===e.type&&e.generated.js}))?(console.clear(),r.assets.forEach(function(e){!function e(r,t){var n=r.modules;if(!n)return;if(n[t.id]||!r.parent){var o=new Function("require","module","exports",t.generated.js);t.isNew=!n[t.id],n[t.id]=[o,t.deps]}else r.parent&&e(r.parent,t)}(a.parcelRequire,e)}),o.forEach(function(e){!function(e,r){var t=e.cache[r];e.hotData={},t&&(t.hot.data=e.hotData);t&&t.hot&&t.hot._disposeCallbacks.length&&t.hot._disposeCallbacks.forEach(function(r){r(e.hotData)});if(delete e.cache[r],e(r),(t=e.cache[r])&&t.hot&&t.hot._acceptCallbacks.length)t.hot._acceptCallbacks.forEach(function(e){e()})}(e[0],e[1])})):location.reload&&location.reload()}if("reload"===r.type&&(f.close(),f.onclose=function(){location.reload()}),"error-resolved"===r.type&&(console.log("[parcel] ✨ Error resolved"),p()),"error"===r.type){console.error("[parcel] 🚨  "+r.error.message+"\n"+r.error.stack),p();var c=function(e){var r=document.createElement("div");r.id=i;var t=document.createElement("div"),n=document.createElement("pre");return t.innerText=e.error.message,n.innerText=e.error.stack,r.innerHTML='<div style="background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;"><span style="background: red; padding: 2px 4px; border-radius: 2px;">ERROR</span><span style="top: 2px; margin-left: 5px; position: relative;">🚨</span><div style="font-size: 18px; font-weight: bold; margin-top: 20px;">'+t.innerHTML+"</div><pre>"+n.innerHTML+"</pre></div>",r}(r);document.body.appendChild(c)}}}function p(){var e=document.getElementById(i);e&&e.remove()}},{}]},{},["../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js","efemetrics.js"]);
},{}],"VV7H":[function(require,module,exports) {
"use strict";var e=n(require("efemetrics2"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t();if(n&&n.has(e))return n.get(e);var r={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=c?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function r(){if(document.getElementById("connectBtn").addEventListener("click",function(){s()}),e.checkCookie()){var t=e.getCookie("database_address"),n=e.getCookie("bucket"),r=e.getCookie("token");e.setBucket(n),e.setUrl(t),e.setToken(r),e.catchEvents(document.getElementById("image"),["click"]),e.catchErrors(),e.catchPerformanceMeasurements(),e.checkDb(n),setInterval(e.sendQueries,4e3),c()}else $("#myForm").css("display","block")}function c(){document.getElementById("basicSendOne").addEventListener("click",function(){e.prepareQuery("metric",4200,{tag1:"test",tag2:3e3,tag3:4e3})}),document.getElementById("basicSendTwo").addEventListener("click",function(){e.prepareQuery("NewMetric",5e3)}),document.getElementById("basicSendThree").addEventListener("click",function(){e.prepareQuery("newMetric",3e3)}),document.getElementById("dropDb").addEventListener("click",function(){e.dropDatabase()}),document.getElementById("basicError").addEventListener("click",function(){e.throwBasicError("example error")}),document.getElementById("longCount").addEventListener("click",function(){e.catchOwnFunctionPerformance(i,"longStart","longEnd")}),document.getElementById("shortCount").addEventListener("click",function(){e.catchOwnFunctionPerformance(d,"shortStart","shortEnd")})}function o(){var t=new Date,n={};n.seconds=t.getSeconds(),n.minutes=t.getMinutes(),e.prepareQuery("time",t.getSeconds(),n)}function a(e,t){return e+Math.floor((t-e)*Math.random())}function i(){for(var e=a(1e8,1e9),t=0;t<e;t++);}function d(){for(var e=a(1e6,1e7),t=0;t<e;t++);}function s(){var t=$("#addr").val(),n=$("#bucket").val(),r=$("#psw").val();e.setCookie("database_address",t),e.setCookie("token",r),e.setCookie("bucket",n),$("#myForm").hide(),e.setBucket(n),e.setUrl(t),e.setToken(r),e.catchEvents(document.getElementById("image"),["click"]),e.catchErrors(),e.catchPerformanceMeasurements(),e.checkDb(n),setInterval(e.sendQueries,4e3),c()}window.addEventListener("DOMContentLoaded",r,!1);
},{"efemetrics2":"UTvv"}]},{},["VV7H"], null)
//# sourceMappingURL=/sender.df56102d.js.map